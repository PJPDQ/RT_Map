const _0x2cb5d7=_0x32dc;(function(_0x14c4af,_0x1f0cb0){const _0x15b999=_0x32dc,_0x22a315=_0x14c4af();while(!![]){try{const _0x1a3c42=parseInt(_0x15b999(0xc0))/0x1+-parseInt(_0x15b999(0x7f))/0x2+-parseInt(_0x15b999(0xa5))/0x3+-parseInt(_0x15b999(0x83))/0x4*(-parseInt(_0x15b999(0x94))/0x5)+parseInt(_0x15b999(0x80))/0x6+parseInt(_0x15b999(0x77))/0x7*(-parseInt(_0x15b999(0x6b))/0x8)+-parseInt(_0x15b999(0x7b))/0x9;if(_0x1a3c42===_0x1f0cb0)break;else _0x22a315['push'](_0x22a315['shift']());}catch(_0x26547a){_0x22a315['push'](_0x22a315['shift']());}}}(_0x1ee6,0x42cf7));let mymap=L['map'](_0x2cb5d7(0x9d))[_0x2cb5d7(0xab)]([-27.46977,153.025131],0xb);var osm=L[_0x2cb5d7(0xaf)](_0x2cb5d7(0x75),{'attribution':_0x2cb5d7(0xc6)})[_0x2cb5d7(0x9c)](mymap),baseMaps={'OpenStreetMap':osm};let geoData_state,pointLayers,stopMap,cMarker,layerControl=L['control'][_0x2cb5d7(0x89)](baseMaps,null,{'collapsed':!![]});var focused_trip=null,sliderControlEnable=![],path,sliderControl=null;let buses={};function onMapClick(_0x3e4c2b){const _0x2194e2=_0x2cb5d7;Object[_0x2194e2(0xa7)](buses)[_0x2194e2(0x7e)](_0x4d6192=>_0x4d6192!==focused_trip)[_0x2194e2(0x81)](_0x5aa9a5=>buses[_0x5aa9a5][buses[_0x5aa9a5]['length']-0x1][_0x2194e2(0x91)](0x1)),liveFilter(HFBs);path&&mymap['removeLayer'](path);sliderControlEnable&&(mymap['removeControl'](sliderControl),sliderControlEnable=![]);;focused_trip=null;}mymap['on'](_0x2cb5d7(0xc5),onMapClick);var options=_0x1f2503=>{const _0x432697=_0x2cb5d7;if(_0x1f2503[_0x432697(0xac)][_0x432697(0xb5)]('QR'))return L[_0x432697(0x68)]([_0x1f2503[_0x432697(0x8d)],_0x1f2503[_0x432697(0x88)]],{'title':_0x432697(0x70)+_0x1f2503[_0x432697(0xac)],'clickable':!![],'draggable':![],'icon':trainIcon})['bindPopup'](popUpContent(_0x1f2503),{'offset':[-0x17,-0x23]});else return _0x1f2503[_0x432697(0xac)][_0x432697(0xb5)](_0x432697(0x99))?L[_0x432697(0x68)]([_0x1f2503['latitude'],_0x1f2503['longitude']],{'title':_0x432697(0x95)+_0x1f2503[_0x432697(0xac)],'clickable':!![],'draggable':![],'icon':ferryIcon})[_0x432697(0x7a)](popUpContent(_0x1f2503),{'offset':[-0x15,-0x1e]}):circleMarkerText([_0x1f2503[_0x432697(0x8d)],_0x1f2503[_0x432697(0x88)]],_0x1f2503,0.25,0.25,'circle1')['bindPopup'](popUpContent(_0x1f2503),{'offset':[-0xc,0xa]});},popUpContent=_0x582a11=>{const _0x193ac2=_0x2cb5d7;var _0x4b39ea=new Date(_0x582a11[_0x193ac2(0xba)]);return _0x193ac2(0xb8)+_0x582a11[_0x193ac2(0xac)]+_0x193ac2(0xb7)+_0x4b39ea[_0x193ac2(0xa3)]()+_0x193ac2(0x93)+_0x582a11['timestamp']+_0x193ac2(0xbc)+_0x582a11[_0x193ac2(0x74)]+_0x193ac2(0x6c)+_0x582a11['stop_id']+_0x193ac2(0xb1);};function circleMarkerText(_0x15ef78,_0x4cdd8b,_0x5f394e,_0x477bc8,_0x2ba572){const _0x46658a=_0x2cb5d7;let _0xcbab70=changeIcon(_0x4cdd8b,_0x5f394e,_0x477bc8,_0x2ba572),_0x53ab40=route_splitter(_0x4cdd8b);var _0x3c2ed7=L[_0x46658a(0x68)](_0x15ef78,{'icon':_0xcbab70,'title':_0x46658a(0x6a)+_0x53ab40,'clickable':!![],'draggable':![],'alt':_0x4cdd8b});return focused_trip!==null&&_0x4cdd8b[_0x46658a(0xac)]!==focused_trip&&_0x3c2ed7[_0x46658a(0x91)](0.35),_0x3c2ed7['on'](_0x46658a(0xc5),markerOnClick),_0x3c2ed7;}function _0x32dc(_0x456c70,_0x5f664){const _0x1ee6b9=_0x1ee6();return _0x32dc=function(_0x32dc1a,_0x3c3318){_0x32dc1a=_0x32dc1a-0x68;let _0x3cde17=_0x1ee6b9[_0x32dc1a];return _0x3cde17;},_0x32dc(_0x456c70,_0x5f664);}function changeIcon(_0x347153,_0xe847a1,_0x5d325a,_0x5e72f4){const _0x15ac70=_0x2cb5d7;var _0x49a690=_0xe847a1*0x2,_0x260309=_0x15ac70(0xb6)+_0x49a690+'em;\x20height:\x20'+_0x49a690+'em;\x20border-width:\x20'+_0x5d325a+_0x15ac70(0x84),_0x4b11ff=_0x49a690+_0x5d325a*0x2,_0x37c964=route_splitter(_0x347153),_0x3554d7=L[_0x15ac70(0x96)]({'html':_0x15ac70(0xbe)+_0x15ac70(0x90)+_0x5e72f4+'\x22\x20'+_0x260309+'>'+_0x37c964+_0x15ac70(0x98),'className':'','iconSize':[_0x4b11ff,_0x4b11ff]});return _0x3554d7;}var markerOnClick=_0x16b05e=>{const _0x2fde29=_0x2cb5d7;let _0x1f3ff1=_0x16b05e[_0x2fde29(0xb3)][_0x2fde29(0x76)][_0x2fde29(0xc1)];var _0x500755=route_splitter(_0x1f3ff1);focused_trip=_0x1f3ff1[_0x2fde29(0xac)],Object[_0x2fde29(0xa7)](buses)[_0x2fde29(0x7e)](_0x294b56=>_0x294b56!==_0x1f3ff1[_0x2fde29(0xac)])['map'](_0x1470d2=>buses[_0x1470d2][buses[_0x1470d2]['length']-0x1][_0x2fde29(0x91)](0.35)),liveFilter(_0x500755);};function render_trajectory(_0x3684d2){const _0x4e5f45=_0x2cb5d7;traj_shp=_0x3684d2[_0x4e5f45(0x9b)],stop_shp=_0x3684d2[_0x4e5f45(0x8b)];var _0x25e6df=JSON[_0x4e5f45(0x72)](traj_shp),_0x522a6e=JSON[_0x4e5f45(0x72)](stop_shp);properties=[],geoData_state=new L['geoJson'](_0x25e6df,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x4e5f45(0x9c)](mymap),layerControl[_0x4e5f45(0xa9)](geoData_state,_0x4e5f45(0x8a)),stopMap=new L[(_0x4e5f45(0x82))](_0x522a6e,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x4e5f45(0x9c)](mymap),layerControl[_0x4e5f45(0xa9)](stopMap,_0x4e5f45(0x6f)),layerControl[_0x4e5f45(0x9c)](mymap);if(_0x25e6df[_0x4e5f45(0x73)][_0x4e5f45(0x86)]>0x0){var _0x2770b2=[];_0x25e6df[_0x4e5f45(0x73)][_0x4e5f45(0xc2)](_0x2609dc=>_0x2770b2[_0x4e5f45(0x8f)](_0x2609dc[_0x4e5f45(0xa0)][_0x4e5f45(0x71)]));}}var source=new EventSource(_0x2cb5d7(0x8e));source['addEventListener']('message',function(_0x332a66){const _0x433f86=_0x2cb5d7;obj=JSON[_0x433f86(0x72)](_0x332a66[_0x433f86(0x97)]);if(obj[_0x433f86(0x8d)]!==null&&obj['longitude']!==null){if(!(obj[_0x433f86(0xac)]in buses)){let _0x1b714c=[];marker1=options(obj)[_0x433f86(0x9c)](mymap)[_0x433f86(0x7a)](popUpContent(obj)),_0x1b714c[_0x433f86(0x8f)](marker1),buses[obj[_0x433f86(0xac)]]=_0x1b714c;}else{let _0x2a7b6c=buses[obj['trip_id']],_0xb63788=_0x2a7b6c['map'](_0x1d63a4=>_0x1d63a4[_0x433f86(0x76)][_0x433f86(0xc1)][_0x433f86(0x8d)]),_0xfaedea=_0x2a7b6c[_0x433f86(0x81)](_0x17a227=>_0x17a227['options']['alt'][_0x433f86(0x88)]);if(_0xb63788[_0x433f86(0x7c)](parseFloat(obj[_0x433f86(0x8d)]))==-0x1&&_0xfaedea[_0x433f86(0x7c)](parseFloat(obj[_0x433f86(0x88)]))==-0x1){for(var _0x439fa9=0x0;_0x439fa9<_0x2a7b6c[_0x433f86(0x86)];_0x439fa9++){mymap['removeLayer'](_0x2a7b6c[_0x439fa9]);}marker1=options(obj)[_0x433f86(0x9c)](mymap)[_0x433f86(0x7a)](popUpContent(obj));if(_0x2a7b6c[_0x433f86(0x86)]>=0x3)var _0x2443de=_0x2a7b6c[_0x433f86(0x7d)]();_0x2a7b6c[_0x433f86(0x8f)](marker1),buses[obj['trip_id']]=_0x2a7b6c;}}}},![]);var route_splitter=_0x37fbda=>{const _0x1b9adc=_0x2cb5d7;return _0x37fbda[_0x1b9adc(0x74)][_0x1b9adc(0xae)]('-')[0x0];};function markers_sender(){const _0x46867c=_0x2cb5d7;if(focused_trip){let _0x2c9ba2=buses[focused_trip],_0xb58324=[];for(var _0x10d871=0x0;_0x10d871<_0x2c9ba2[_0x46867c(0x86)];_0x10d871++){let _0xbc7700=_0x2c9ba2[_0x10d871][_0x46867c(0x76)]['alt'];_0xb58324[_0x46867c(0x8f)](_0xbc7700);}request_data=JSON[_0x46867c(0xc4)]({'markers':_0xb58324}),$[_0x46867c(0x92)]({'url':'/','type':_0x46867c(0xa8),'contentType':_0x46867c(0x69),'data':request_data,'dataSrc':_0x46867c(0xc3),'error':function(_0x2a3351){const _0x1c1202=_0x46867c;console[_0x1c1202(0x6e)](_0x2a3351);},'success':function(_0x368e0e){const _0xd0173b=_0x46867c;sliderControlEnable&&(mymap['removeControl'](sliderControl),sliderControlEnable=False);;jsonRes=JSON[_0xd0173b(0x72)](_0x368e0e[_0xd0173b(0x73)]),pointLayers=L[_0xd0173b(0x82)](jsonRes,{'onEachFeature':function(_0x226fdd,_0x1f6bbd){const _0x58af51=_0xd0173b;let _0xba5f82=pointPopUp(_0x226fdd[_0x58af51(0xa0)]);_0x1f6bbd[_0x58af51(0x7a)](_0xba5f82)[_0x58af51(0x78)]();},'pointToLayer':function(_0x54775d,_0x4b41d3){const _0x7a5ae3=_0xd0173b;let _0x4323e2=changeIcon(_0x54775d[_0x7a5ae3(0xa0)],0.25,0.25,_0x7a5ae3(0xa4));return L['marker'](_0x4b41d3,{'icon':_0x4323e2,'title':obj});}}),sliderControl=L[_0xd0173b(0xbd)][_0xd0173b(0xa1)]({'position':_0xd0173b(0x9f),'layer':pointLayers}),mymap[_0xd0173b(0xb0)](sliderControl),sliderControl['startSlider'](),sliderControlEnable=!![];}});}}function liveFilter(_0x3e0fe5){const _0x480381=_0x2cb5d7;let _0x5b8075=[];!Array[_0x480381(0xa6)](_0x3e0fe5)?_0x5b8075=[_0x3e0fe5]:_0x5b8075=_0x3e0fe5,request_data=JSON['stringify']({'routes':_0x5b8075}),$['ajax']({'url':'/','type':_0x480381(0xa8),'contentType':_0x480381(0x69),'data':request_data,'dataSrc':_0x480381(0x8c),'error':function(_0x4a0cbc){const _0x1d179d=_0x480381;console[_0x1d179d(0x6e)](_0x4a0cbc);},'success':function(_0x792fea){const _0x58fb62=_0x480381;mymap[_0x58fb62(0x87)](geoData_state),_0x792fea==''?layerControl[_0x58fb62(0x6d)]():makeStateMap(_0x792fea);}});}function render_checkboxes_routes(){const _0x5c74f8=_0x2cb5d7;let _0xea71cb=document[_0x5c74f8(0xb4)](_0x5c74f8(0xbf));for(let _0x24222d=0x0;_0x24222d<HFBs[_0x5c74f8(0x86)];_0x24222d++){let _0x2d8185=document[_0x5c74f8(0x9a)]('input'),_0x56a1ea=document[_0x5c74f8(0x9a)](_0x5c74f8(0xbb)),_0x5f3ad6=document[_0x5c74f8(0x9a)]('br');_0x2d8185[_0x5c74f8(0xaa)]=_0x5c74f8(0x79),_0x2d8185[_0x5c74f8(0x9e)]=HFBs[_0x24222d],_0x2d8185[_0x5c74f8(0xa2)]=_0x5c74f8(0xb9),_0xea71cb['appendChild'](_0x2d8185),_0xea71cb[_0x5c74f8(0x85)](_0x56a1ea),_0x56a1ea[_0x5c74f8(0x85)](document[_0x5c74f8(0xc7)](HFBs[_0x24222d])),_0xea71cb[_0x5c74f8(0x85)](_0x5f3ad6);}}const checkedBoxRoutes=document[_0x2cb5d7(0xb4)](_0x2cb5d7(0xbf));function _0x1ee6(){const _0x11874e=['properties','sliderControl','name','toLocaleString','circle1','504294fNWGfe','isArray','keys','POST','addOverlay','type','setView','trip_id','checked','split','tileLayer','addControl','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20</table>','getElementsByName','sourceTarget','getElementById','includes','style=\x22width:\x20','</p>\x20\x20\x20\x20\x20\x20<table\x20class=\x22popup-table\x22\x20id=\x22table-vals\x22>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Datetime:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22time-dt\x22\x20id=\x22time-dt\x22\x20class=\x22popup-table-data\x22>','<p\x20name=\x22trip-id\x22\x20id=\x22trip-id\x22\x20class=\x22clearable\x22>','routes','timestamp_dt','label','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Route\x20ID:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','control','<span\x20class=\x22','checkboxRoutes','456459hKTqqX','alt','forEach','markerSelection','stringify','click','&copy;\x20<a\x20href=\x22https://stadiamaps.com/\x22>Stadia\x20Maps</a>,\x20&copy;\x20<a\x20href=\x22http://openstreetmap.org\x22>OpenStreetMap</a>\x20contributors','createTextNode','marker','application/json;\x20charset=utf-8','Bus\x20','351824COMJGy','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Stop\x20ID:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','clearLayers','log','stop_data','Train\x20TripID\x20','time','parse','features','route_id','https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png','options','63gworrY','openPopup','checkbox','bindPopup','296469AwXLwm','indexOf','shift','filter','143084lpFShs','962292zediSD','map','geoJson','18852lKHpOH','em;\x22','appendChild','length','removeLayer','longitude','layers','geojson_data','stop_shp','checkedboxRoutes','latitude','/gtfs_data','push','circle\x20','setOpacity','ajax','</td>\x20\x20\x20\x20\x20\x20</tr>\x20\x20\x20\x20\x20\x20<tr\x20class=\x22popup-table-row\x22>\x20\x20\x20\x20\x20\x20<th\x20class=\x22popup-table-header\x22>Timestamp:</th>\x20\x20\x20\x20\x20\x20<td\x20name=\x22route-id\x22\x20id=\x22route-id\x22\x20class=\x22popup-table-data\x22>','345UeCKgn','Ferry\x20TripID\x20','divIcon','data','</span>','BCC','createElement','traj_shp','addTo','mapid','value','topright'];_0x1ee6=function(){return _0x11874e;};return _0x1ee6();}let selectedRoutes=[];function makeStateMap(_0x259a9e){const _0x546954=_0x2cb5d7;traj_shp=_0x259a9e['traj_shp'],stop_shp=_0x259a9e[_0x546954(0x8b)];let _0x3a3e38=JSON[_0x546954(0x72)](traj_shp),_0x43cec5=JSON[_0x546954(0x72)](stop_shp);stopMap[_0x546954(0x6d)](),layerControl['removeLayer'](geoData_state),layerControl['removeLayer'](stopMap),geoData_state=new L['geoJson'](_0x3a3e38,{'style':newStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x546954(0x9c)](mymap),stopMap=new L[(_0x546954(0x82))](_0x43cec5,{'style':handleStyle,'pointToLayer':handlePoint,'onEachFeature':handleFeature})[_0x546954(0x9c)](mymap),layerControl[_0x546954(0xa9)](geoData_state,_0x546954(0x8a)),layerControl[_0x546954(0xa9)](stopMap,_0x546954(0x6f));}function toggle(_0x5ae10f){const _0x3a8de0=_0x2cb5d7;let _0x4da05d=document[_0x3a8de0(0xb2)]('routes');for(let _0x7ebae=0x0;_0x7ebae<_0x4da05d['length'];_0x7ebae++){_0x4da05d[_0x7ebae][_0x3a8de0(0xad)]=_0x5ae10f[_0x3a8de0(0xad)];}}